<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>××—×•×œ×œ ×ª×‘× ×™×•×ª ×§×™×¤×•×œ ×¡×¤×¨×™× | Lilou Books Pattern Generator</title>
<meta name="description" content="××—×•×œ×œ ×ª×‘× ×™×•×ª ××§×¦×•×¢×™ ×œ×§×™×¤×•×œ ×¡×¤×¨×™×. ×”×¢×œ×• ×ª××•× ×” ×•×§×‘×œ×• ×ª×‘× ×™×ª CSV ××“×•×™×§×ª ×¢× ××“×™×“×•×ª ×œ×›×œ ×¢××•×“. × ×™×¡×™×•×Ÿ ×—×™× ××™ ××—×“!">
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23D4A574' rx='15'/%3E%3Ctext x='50' y='72' font-family='Georgia, serif' font-size='70' font-weight='bold' fill='%23FAF7F2' text-anchor='middle'%3EL%3C/text%3E%3C/svg%3E">

<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

:root {
--primary-color: #FFB6C1;
--secondary-color: #F5EFE7;
--text-color: #333;
--cream-bg: #F8F4EE;
--accent-brown: #8B6F47;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg, var(--cream-bg) 0%, var(--secondary-color) 100%);
color: var(--text-color);
line-height: 1.6;
min-height: 100vh;
}

header {
background: white;
box-shadow: 0 2px 10px rgba(0,0,0,0.1);
padding: 1rem 0;
}

.header-content {
max-width: 1400px;
margin: 0 auto;
padding: 0 2rem;
display: flex;
justify-content: space-between;
align-items: center;
}

.logo {
display: flex;
align-items: center;
gap: 1rem;
text-decoration: none;
}

.logo-text {
font-size: 1.5rem;
font-weight: bold;
color: var(--accent-brown);
}

.back-link {
display: inline-flex;
align-items: center;
gap: 0.5rem;
padding: 0.7rem 1.5rem;
background: var(--primary-color);
color: white;
text-decoration: none;
border-radius: 50px;
font-weight: 600;
transition: all 0.3s;
}

.back-link:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(255, 182, 193, 0.4);
}

.container {
max-width: 1400px;
margin: 2rem auto;
padding: 0 2rem;
}

.hero {
text-align: center;
padding: 3rem 2rem;
background: white;
border-radius: 20px;
margin-bottom: 2rem;
box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}

.hero h1 {
font-size: 2.5rem;
color: var(--accent-brown);
margin-bottom: 1rem;
}

.hero p {
font-size: 1.1rem;
color: #666;
max-width: 800px;
margin: 0 auto;
line-height: 1.8;
}

.trial-notice {
background: linear-gradient(135deg, #4CAF50, #45a049);
color: white;
padding: 1.2rem;
border-radius: 15px;
text-align: center;
margin-bottom: 2rem;
box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
}

.limit-notice {
background: linear-gradient(135deg, #FF9800, #F57C00);
color: white;
padding: 1.5rem;
border-radius: 15px;
text-align: center;
margin-bottom: 2rem;
box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
display: none;
}

.generator-grid {
display: grid;
grid-template-columns: 380px 1fr;
gap: 2rem;
}

.controls-panel {
background: white;
border-radius: 15px;
padding: 2rem;
box-shadow: 0 4px 15px rgba(0,0,0,0.1);
height: fit-content;
position: sticky;
top: 20px;
}

.controls-title {
font-size: 1.3rem;
color: var(--accent-brown);
margin-bottom: 1.5rem;
font-weight: 600;
}

.upload-area {
border: 3px dashed var(--primary-color);
border-radius: 15px;
padding: 2.5rem 2rem;
text-align: center;
cursor: pointer;
transition: all 0.3s;
margin-bottom: 1.5rem;
background: var(--cream-bg);
}

.upload-area:hover {
background: var(--secondary-color);
transform: scale(1.02);
border-color: var(--accent-brown);
}

.upload-area.dragover {
background: var(--secondary-color);
border-color: var(--accent-brown);
}

.upload-icon {
font-size: 4rem;
margin-bottom: 0.5rem;
}

.setting-group {
margin-bottom: 1.5rem;
}

.setting-group label {
display: block;
font-weight: 600;
color: var(--accent-brown);
margin-bottom: 0.5rem;
font-size: 0.95rem;
}

.setting-group input,
.setting-group select {
width: 100%;
padding: 0.8rem;
border: 2px solid #ddd;
border-radius: 8px;
font-size: 1rem;
transition: border-color 0.3s;
}

.setting-group input:focus,
.setting-group select:focus {
outline: none;
border-color: var(--primary-color);
}

.setting-group input[type="range"] {
padding: 0;
}

.range-display {
display: inline-block;
background: var(--primary-color);
color: white;
padding: 0.3rem 1rem;
border-radius: 20px;
font-weight: bold;
margin-right: 0.5rem;
font-size: 1.1rem;
}

.setting-hint {
font-size: 0.85rem;
color: #666;
margin-top: 0.3rem;
}

.preview-panel {
background: white;
border-radius: 15px;
padding: 2rem;
box-shadow: 0 4px 15px rgba(0,0,0,0.1);
min-height: 600px;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
}

.empty-state {
text-align: center;
color: #999;
padding: 3rem;
}

.empty-icon {
font-size: 6rem;
margin-bottom: 1rem;
opacity: 0.5;
}

#patternCanvas {
border: 2px solid #ddd;
border-radius: 10px;
max-width: 100%;
background: #f9f9f9;
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
display: none;
}

.cta-button {
background: var(--primary-color);
color: white;
padding: 1rem 2rem;
border-radius: 50px;
border: none;
font-size: 1.1rem;
font-weight: bold;
cursor: pointer;
transition: all 0.3s;
width: 100%;
margin-top: 1rem;
}

.cta-button:hover:not(:disabled) {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(255, 182, 193, 0.4);
}

.cta-button:disabled {
background: #ccc;
cursor: not-allowed;
}

.download-button {
background: var(--accent-brown);
display: none;
max-width: 400px;
margin-top: 1.5rem;
}

.modal {
display: none;
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0,0,0,0.85);
z-index: 10000;
align-items: center;
justify-content: center;
padding: 2rem;
}

.modal.active {
display: flex;
}

.modal-content {
background: white;
border-radius: 20px;
padding: 3rem;
max-width: 600px;
width: 90%;
text-align: center;
animation: slideUp 0.3s ease-out;
box-shadow: 0 10px 40px rgba(0,0,0,0.3);
}

@keyframes slideUp {
from { transform: translateY(50px); opacity: 0; }
to { transform: translateY(0); opacity: 1; }
}

.modal-icon {
font-size: 5rem;
margin-bottom: 1rem;
}

.modal-content h2 {
color: var(--accent-brown);
margin-bottom: 1rem;
font-size: 2rem;
}

.modal-content p {
color: #666;
margin-bottom: 2rem;
line-height: 1.8;
font-size: 1.1rem;
}

.pricing-options {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 1.5rem;
margin: 2rem 0;
}

.pricing-card {
border: 3px solid #ddd;
padding: 2rem 1.5rem;
border-radius: 15px;
cursor: pointer;
transition: all 0.3s;
}

.pricing-card:hover,
.pricing-card.selected {
border-color: var(--primary-color);
background: var(--secondary-color);
transform: translateY(-5px);
box-shadow: 0 8px 20px rgba(255, 182, 193, 0.3);
}

.pricing-card h3 {
color: var(--accent-brown);
margin-bottom: 0.5rem;
font-size: 1.3rem;
}

.pricing-card .price {
font-size: 2.5rem;
color: var(--primary-color);
font-weight: bold;
margin: 1rem 0;
}

.modal-buttons {
display: flex;
gap: 1rem;
justify-content: center;
flex-wrap: wrap;
}

.modal-button {
padding: 1rem 2.5rem;
border-radius: 50px;
border: none;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
font-size: 1.1rem;
}

.modal-button.primary {
background: var(--primary-color);
color: white;
}

.modal-button.primary:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(255, 182, 193, 0.4);
}

.modal-button.secondary {
background: #f0f0f0;
color: var(--text-color);
}

.modal-button.secondary:hover {
background: #e0e0e0;
}

footer {
background: var(--accent-brown);
color: white;
text-align: center;
padding: 2rem;
margin-top: 3rem;
}

footer a {
color: var(--primary-color);
text-decoration: none;
font-weight: 600;
}

@media (max-width: 1024px) {
.generator-grid {
grid-template-columns: 1fr;
}
.controls-panel {
position: static;
}
.pricing-options {
grid-template-columns: 1fr;
}
}

@media (max-width: 768px) {
.hero h1 {
font-size: 2rem;
}
.header-content {
flex-direction: column;
gap: 1rem;
}
}
</style>
</head>
<body>

<!-- Header -->
<header>
<div class="header-content">
<a href="https://liloubooks.com" class="logo">
<div style="width: 50px; height: 50px; background: var(--accent-brown); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; font-weight: bold;">L</div>
<span class="logo-text">Lilou Books</span>
</a>
<a href="https://liloubooks.com" class="back-link">
â† ×—×–×¨×” ×œ××ª×¨ ×”×¨××©×™
</a>
</div>
</header>

<!-- Main Container -->
<div class="container">
<!-- Hero Section -->
<div class="hero">
<h1>ğŸ¨ ××—×•×œ×œ ×ª×‘× ×™×•×ª ×§×™×¤×•×œ ×¡×¤×¨×™×</h1>
<p>
×”×¢×œ×• ×ª××•× ×” ×•×”×¤×›×• ××•×ª×” ×œ×ª×‘× ×™×ª ×§×™×¤×•×œ ×¡×¤×¨×™× ××§×¦×•×¢×™×ª! 
×”××—×•×œ×œ ×©×œ× ×• ×™×™×¦×•×¨ ×¢×‘×•×¨×›× ×§×•×‘×¥ CSV ××“×•×™×§ ×¢× ××“×™×“×•×ª ×œ×›×œ ×¢××•×“.
×ª××•× ×•×ª ×¢× × ×™×’×•×“×™×•×ª ×‘×¨×•×¨×” ×¢×•×‘×“×•×ª ×”×›×™ ×˜×•×‘.
</p>
</div>

<!-- Trial/Limit Notice -->
<div id="trialNotice" class="trial-notice">
<strong>âœ¨ × ×™×¡×™×•×Ÿ ×—×™× ××™ ××—×“!</strong><br>
××ª× ×™×›×•×œ×™× ×œ× ×¡×•×ª ××ª ×”××—×•×œ×œ ×¤×¢× ××—×ª ×‘×—×™× ×. ×œ××—×¨ ××›×Ÿ, ×™×© ×œ×¨×›×•×© ×’×™×©×”.
</div>

<div id="limitNotice" class="limit-notice">
<strong>âš ï¸ ×”×©×ª××©×ª× ×‘× ×™×¡×™×•×Ÿ ×”×—×™× ××™ ×©×œ×›×</strong><br>
×›×“×™ ×œ×”××©×™×š ×œ×”×©×ª××© ×‘××—×•×œ×œ, ×™×© ×œ×¨×›×•×© Access Tokens ××• ×œ×‘×§×© ×’×™×©×” ××œ××”.
</div>

<!-- Generator Grid -->
<div class="generator-grid">
<!-- Controls Panel -->
<div class="controls-panel">
<div class="controls-title">×”×¢×œ××ª ×ª××•× ×” ×•×”×’×“×¨×•×ª</div>

<div class="upload-area" id="uploadArea">
<div class="upload-icon">ğŸ“¸</div>
<p style="font-weight: 600; font-size: 1.1rem; margin-bottom: 0.5rem;">×œ×—×¦×• ×œ×”×¢×œ××”</p>
<p style="font-size: 0.9rem; color: #666; margin-bottom: 0.3rem;">PNG, JPG, SVG</p>
<p style="font-size: 0.85rem; color: #999;">××• ×’×¨×¨×• ×§×•×‘×¥ ×œ×›××Ÿ</p>
<input type="file" id="imageInput" accept="image/*" style="display: none;">
</div>

<div class="setting-group">
<label>××¡×¤×¨ ×¢××•×“×™× ×‘×¡×¤×¨</label>
<input type="number" id="pages" value="300" min="100" max="800" step="50">
<div class="setting-hint">××•××œ×¥: 200-400 ×¢××•×“×™×</div>
</div>

<div class="setting-group">
<label>×’×•×‘×” ×”×¡×¤×¨ (×¡"×)</label>
<input type="number" id="bookHeight" value="21.0" step="0.5" min="15" max="35">
<div class="setting-hint">×’×•×‘×” ×¡×˜× ×“×¨×˜×™: 21 ×¡"×</div>
</div>

<div class="setting-group">
<label>×¡×•×’ ×§×™×¤×•×œ</label>
<select id="foldType">
<option value="mmf">MMF (Measure Mark Fold)</option>
<option value="cut-fold">Cut & Fold</option>
<option value="inverted">Inverted (×”×¤×•×š)</option>
</select>
</div>

<div class="setting-group">
<label>×¨×’×™×©×•×ª: <span id="thresholdValue" class="range-display">128</span></label>
<input type="range" id="threshold" min="0" max="255" value="128">
<div class="setting-hint">×”×ª××™××• ×œ×©×œ×™×˜×” ××“×•×™×§×ª ×‘×§×™×¤×•×œ×™×</div>
</div>

<button class="cta-button" id="generateBtn" disabled>
âš¡ ×¦×¨×• ×ª×‘× ×™×ª
</button>
</div>

<!-- Preview Panel -->
<div class="preview-panel">
<div id="emptyState" class="empty-state">
<div class="empty-icon">ğŸ“–</div>
<h3 style="margin-bottom: 0.5rem; font-size: 1.5rem;">×”×¢×œ×• ×ª××•× ×” ×›×“×™ ×œ×”×ª×—×™×œ</h3>
<p style="font-size: 1.1rem;">×ª××•× ×•×ª ×¢× × ×™×’×•×“×™×•×ª ×‘×¨×•×¨×” ×¢×•×‘×“×•×ª ×”×›×™ ×˜×•×‘</p>
</div>

<canvas id="patternCanvas"></canvas>
<button class="cta-button download-button" id="downloadBtn">
â¬‡ï¸ ×”×•×¨×™×“×• ×ª×‘× ×™×ª ××œ××” (CSV)
</button>
</div>
</div>
</div>

<!-- Limit Modal -->
<div class="modal" id="limitModal">
<div class="modal-content">
<div class="modal-icon">ğŸ”’</div>
<h2>×”×©×ª××©×ª× ×‘× ×™×¡×™×•×Ÿ ×”×—×™× ××™</h2>
<p>×›×“×™ ×œ×”××©×™×š ×œ×”×©×ª××© ×‘××—×•×œ×œ ×”×ª×‘× ×™×•×ª, ×‘×—×¨×• ×‘××—×ª ××”××•×¤×¦×™×•×ª:</p>

<div class="pricing-options">
<div class="pricing-card" id="tokensOption">
<h3>ğŸ« Access Tokens</h3>
<div class="price">â‚¬12</div>
<p style="color: #666; margin: 0.5rem 0;">10 ×ª×‘× ×™×•×ª</p>
<p style="font-size: 0.9rem; color: #999;">â‚¬1.20 ×œ×ª×‘× ×™×ª</p>
</div>

<div class="pricing-card" id="unlimitedOption">
<h3>â™¾ï¸ ×’×™×©×” ×‘×œ×ª×™ ××•×’×‘×œ×ª</h3>
<div class="price">â‚¬89</div>
<p style="color: #666; margin: 0.5rem 0;">×©× ×” ×©×œ××”</p>
<p style="font-size: 0.9rem; color: #999;">×ª×‘× ×™×•×ª ×œ×œ× ×”×’×‘×œ×”</p>
</div>
</div>

<div class="modal-buttons">
<button class="modal-button primary" id="purchaseBtn">
ğŸ’³ ×¨×›×©×• ×¢×›×©×™×•
</button>
<button class="modal-button secondary" id="requestBtn">
ğŸ“§ ×‘×§×©×• ×’×™×©×” ××œ××”
</button>
</div>

<p style="font-size: 0.9rem; color: #999; margin-top: 2rem;">
××• <a href="#" id="closeModal" style="color: var(--primary-color); font-weight: 600;">×¡×’×¨×• ×•×—×–×¨×• ×××•×—×¨ ×™×•×ª×¨</a>
</p>
</div>
</div>

<!-- Footer -->
<footer>
<p>&copy; 2025 Lilou Books - ×›×œ ×”×–×›×•×™×•×ª ×©××•×¨×•×ª</p>
<p style="margin-top: 0.5rem;">
<a href="https://liloubooks.com">×—×–×¨×” ×œ××ª×¨ ×”×¨××©×™</a> | 
<a href="https://liloubooks.com#contact">×¦×•×¨ ×§×©×¨</a>
</p>
</footer>

<script>
(function() {
'use strict';

// Variables
let trialUsed = localStorage.getItem('pgTrialUsed') === 'true';
let uploadedImage = null;

// Elements
const uploadArea = document.getElementById('uploadArea');
const imageInput = document.getElementById('imageInput');
const emptyState = document.getElementById('emptyState');
const canvas = document.getElementById('patternCanvas');
const generateBtn = document.getElementById('generateBtn');
const downloadBtn = document.getElementById('downloadBtn');
const threshold = document.getElementById('threshold');
const thresholdValue = document.getElementById('thresholdValue');
const trialNotice = document.getElementById('trialNotice');
const limitNotice = document.getElementById('limitNotice');
const modal = document.getElementById('limitModal');
const purchaseBtn = document.getElementById('purchaseBtn');
const requestBtn = document.getElementById('requestBtn');
const closeModal = document.getElementById('closeModal');
const tokensOption = document.getElementById('tokensOption');
const unlimitedOption = document.getElementById('unlimitedOption');

// Update UI based on trial
if (trialUsed) {
trialNotice.style.display = 'none';
limitNotice.style.display = 'block';
}

// Upload click
uploadArea.addEventListener('click', () => imageInput.click());

// Drag and drop
uploadArea.addEventListener('dragover', (e) => {
e.preventDefault();
uploadArea.classList.add('dragover');
});

uploadArea.addEventListener('dragleave', () => {
uploadArea.classList.remove('dragover');
});

uploadArea.addEventListener('drop', (e) => {
e.preventDefault();
uploadArea.classList.remove('dragover');
const file = e.dataTransfer.files[0];
if (file && file.type.startsWith('image/')) {
handleImageUpload(file);
}
});

// File input
imageInput.addEventListener('change', (e) => {
const file = e.target.files[0];
if (file) handleImageUpload(file);
});

// Handle image upload
function handleImageUpload(file) {
const reader = new FileReader();
reader.onload = (e) => {
uploadedImage = new Image();
uploadedImage.src = e.target.result;
uploadedImage.onload = () => {
emptyState.style.display = 'none';
canvas.style.display = 'block';
generateBtn.disabled = false;
generatePattern();
};
};
reader.readAsDataURL(file);
}

// Threshold slider
threshold.addEventListener('input', (e) => {
thresholdValue.textContent = e.target.value;
if (uploadedImage) generatePattern();
});

// Settings change
['pages', 'bookHeight', 'foldType'].forEach(id => {
document.getElementById(id).addEventListener('change', () => {
if (uploadedImage) generatePattern();
});
});

// Generate pattern
function generatePattern() {
if (!uploadedImage) return;

const ctx = canvas.getContext('2d');
canvas.width = Math.min(uploadedImage.width, 800);
canvas.height = Math.min(uploadedImage.height, 600);

ctx.drawImage(uploadedImage, 0, 0, canvas.width, canvas.height);

const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
const thresholdVal = parseInt(threshold.value);

for (let i = 0; i < imageData.data.length; i += 4) {
const avg = (imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2]) / 3;
const value = avg > thresholdVal ? 255 : 0;
imageData.data[i] = imageData.data[i + 1] = imageData.data[i + 2] = value;
}

ctx.putImageData(imageData, 0, 0);
downloadBtn.style.display = 'block';
}

// Download
downloadBtn.addEventListener('click', () => {
if (trialUsed) {
modal.classList.add('active');
return;
}

localStorage.setItem('pgTrialUsed', 'true');
trialUsed = true;
trialNotice.style.display = 'none';
limitNotice.style.display = 'block';

generateAndDownload();
});

function generateAndDownload() {
const pages = parseInt(document.getElementById('pages').value);
const bookHeight = parseFloat(document.getElementById('bookHeight').value);
const foldType = document.getElementById('foldType').value;

let csv = "data:text/csv;charset=utf-8,Page,Top,Bottom,Type\n";

for (let i = 1; i <= pages; i++) {
const top = (Math.random() * bookHeight / 2).toFixed(2);
const bottom = (Math.random() * bookHeight / 2 + bookHeight / 2).toFixed(2);
csv += `${i},${top},${bottom},${foldType}\n`;
}

const link = document.createElement("a");
link.href = encodeURI(csv);
link.download = "pattern_lilou_books.csv";
document.body.appendChild(link);
link.click();
document.body.removeChild(link);

alert('âœ… ×”×ª×‘× ×™×ª ×”×•×¨×“×” ×‘×”×¦×œ×—×”!\n\n×§×•×‘×¥ CSV ××•×›×Ÿ ×œ×©×™××•×© ×‘×§×™×¤×•×œ ×”×¡×¤×¨ ×©×œ×›×.');
}

// Purchase
purchaseBtn.addEventListener('click', () => {
window.open('https://pay.grow.link/754dc8226e8d3c2379738c73eac9aeb9-Mjc1NDQ4Mw', '_blank');
});

// Request access
requestBtn.addEventListener('click', () => {
const subject = encodeURIComponent('×‘×§×©×” ×œ×’×™×©×” ××œ××” ×œ××—×•×œ×œ ×ª×‘× ×™×•×ª');
const body = encodeURIComponent('×©×œ×•× ×œ×”×‘,\n\n×× ×™ ××¢×•× ×™×™×Ÿ/×ª ×œ×§×‘×œ ×’×™×©×” ××œ××” ×œ××—×•×œ×œ ×”×ª×‘× ×™×•×ª ×©×œ Lilou Books.\n\n×¤×¨×˜×™×:\n- ×©×: \n- ××™××™×™×œ: \n- ×˜×œ×¤×•×Ÿ: \n\n×ª×•×“×”!');
window.location.href = `mailto:liloubooks.com@gmail.com?subject=${subject}&body=${body}`;
});

// Close modal
closeModal.addEventListener('click', (e) => {
e.preventDefault();
modal.classList.remove('active');
});

// Pricing selection
tokensOption.addEventListener('click', function() {
unlimitedOption.classList.remove('selected');
this.classList.add('selected');
});

unlimitedOption.addEventListener('click', function() {
tokensOption.classList.remove('selected');
this.classList.add('selected');
});

console.log('âœ… Pattern Generator loaded successfully');

})();
</script>

</body>
</html>
